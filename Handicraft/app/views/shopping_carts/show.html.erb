<% if notice %>
    <p id="notice"><%= notice %></p>
<% end %>


<h2>Your Shopping Cart</h2>

<table border="0" style="border-spacing: 10px; border-collapse: separate;">
  <tr>
    <td></td>
    <td></td>
    <td>Price</td>
    <td>Quantity</td>
    <td>Total Price</td>
  </tr>
  <% @shopping_cart.cart_items.each do |item| %>
      <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
        <td><%= link_to image_tag("thumbnails/" + item.product.image_url, class: 'img-responsive img-thumbnail',:border =>0),product_details_index_path(product_id: item.product.product_id)%></td>

        <td>
          <dt><%= item.product.name %></dt>
          <%@seller= Seller.where(seller_id: item.seller_id)%>
          <%@seller.each do |name|%>
              <dt>Sold by:<%=name.company %></dt>
              <dt>Ships from:<%=name.city %>,<%=name.state_province %></dt>
          <%end%>
          <dt>In Stock:<%= item.product.quantity %></dt>

        </td>

        <td><%= number_to_currency(item.product.price) %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.total_price) %></td>

        <td><%= link_to 'Delete', cart_item_path(:id => item.product.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>

        <td><%= link_to 'Edit', edit_cart_item_path(:id => item.product.id) %> </td>

      </tr>

  <% end %>
  <tr>
    <td></td>
    <td>Shopping Cart Total</td>
    <td></td>
    <td></td>
    <td><%= number_to_currency(@shopping_cart.total_price) %></td>

  </tr>
</table>

<br>


<%= button_to 'Empty cart', @shopping_cart, method: :delete, confirm: 'Are you sure?' %>
<table border="0" style="border-spacing: 10px; border-collapse: separate;">
  <tr>
    <td><%= link_to 'Continue Shopping', catalog_path %></td>
    <td><%= link_to 'Proceed to Checkout', shipping_books_url %></td>
  </tr>
</table>

